FROM youken9980/debian:buster-slim
LABEL maintainer="YangJian <youken9980@163.com>"

ENV JAVA_HOME="/usr/local/openjdk-8"
ENV PATH=".:$PATH:$JAVA_HOME/bin"
ENV GITHUB_MIRROR="https://github.wuyanzheshui.workers.dev"

RUN set -eux && \
    \
    apt-get update && \
    apt-get install --no-install-recommends -y axel && \
    \
    FILE_NAME="openjdk-8" && \
    DOWNLOAD_URL="$GITHUB_MIRROR/AdoptOpenJDK/openjdk8-upstream-binaries/releases/download/jdk8u282-b08/OpenJDK8U-jre_x64_linux_8u282b08.tar.gz" && \
    axel -n 32 -o $FILE_NAME.tgz $DOWNLOAD_URL && \
    mkdir -p $JAVA_HOME && \
    tar --strip 1 -zxvf $FILE_NAME.tgz -C $JAVA_HOME && \
    rm $FILE_NAME.tgz && \
    \
    rm -rf /var/lib/apt/lists/*

STOPSIGNAL SIGTERM

CMD ["/bin/bash"]
